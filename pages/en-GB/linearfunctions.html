<div class="page">
    <div class="content">
        <h1>Linear functions</h1>
        <p>
            A linear function is a function of the type $f(x) = mx + c$. Its graph will always be a straight line when drawn in a linear coordinate system. Thus, the <i>absolute</i> growth rates of $x$ and $f$ are proportional: $\Delta f = m \cdot \Delta x$.
        </p>

        <h2>Significance of constants</h2>
        <dl>
            <dt>$m$</dt>
            <dd>
                Determines the change of the function for every $x$. Usually limited to $m \neq 0$, as $m = 0$ would result in a horisontal line. When $m > 0$ the graph increases in $f$ whereas $m &lt; 0$ will decrease.
            </dd>
            <dt>$c$</dt>
            <dd>
                The offset on the $y$ axis. Dictates the function value when $x = 0$, as $f(x) = m \cdot 0 + c = c$.
            </dd>
        </dl>
        <p>
            You can try out linear functions with the below interactive illustration to get a visualisation of the significance of each of the constants:
        </p>
        <div id="linear-graph-visualiser" class="hor-box">
            <div class="graph"></div>
            <div class="graph-controls">
                <div class="graph-input" data-name = "m" data-min="-10" data-max="10">
                    <span>$m = $ <input type="number"></span>
                    <input type="range">
                </div>
                <div class="graph-input" data-name = "c" data-min="-5" data-max="5">
                    <span>$c = $ <input type="number"></span>
                    <input type="range">
                </div>
            </div>
        </div>
    </div>
    <div class="toc"></div>
</div>
<script>
    (function() {
        var linearGraph = new InteractiveGraph({
            plotOptions: {
                target: "#linear-graph-visualiser > .graph",
                data: [{
                    fn: 'x + 2'
                }],
                width:  650,
                height: 400,
                disableZoom: true,
                xLabel: 'x axis',
                yLabel: 'y axis',
                xDomain: [-2, 6],
                yDomain: [-2, 6]
            },
            defaultValues: {
                m: 1,
                c: 2
            },
            inputSelector: '#linear-graph-visualiser > .graph-controls > .graph-input',
            fn: '%mx + %c',


            initialDrawCb: function(graph, values, line, coords, size) {
                var canvas = graph.canvas[0][0];
                var svg = canvas.parentNode;

                var gSlope = document.createSVGElement('g');
                var slope  = document.createSVGElement('path');
                slope.classList.add('drawSlope');
                slope.setAttribute('stroke',           'black');
                slope.setAttribute('opacity',          .75);
                slope.setAttribute('stroke-dasharray', '5,5');
                slope.setAttribute('fill',             'none');

                gSlope.appendChild(slope);
                canvas.appendChild(gSlope);

                var html = '<div class="h-center">' + katex.renderToString('\\leftarrow 1 \\rightarrow') + '</div>';
                var xText  = document.createHTMLInSVG(html, 0, 0, size.w(1), size.h(.5));
                xText.classList.add('drawXText');

                svg.insertBefore(xText, svg.firstChild);
            },


            postDrawCb: function(graph, values, line, coords, size) {
                var canvas = graph.canvas[0][0];
                var svg = canvas.parentNode;
                
                var fn = function(x) {
                    return values.m * x + values.c;
                };
                var fnReverse = function(y) {
                    return (y - values.c) / values.m;
                };


                // Slope
                var slope = canvas.querySelector('.drawSlope');

                var y1Slope = 2;
                var x1Slope = fnReverse(y1Slope);

                var x2Slope = x1Slope + 1;
                var y2Slope = y1Slope;

                var x3Slope = x2Slope;
                var y3Slope = fn(x2Slope);
                slope.setAttribute('d', line([ [x1Slope, y1Slope], [x2Slope, y2Slope], [x3Slope, y3Slope] ]));


                // x text
                var xText = svg.querySelector('.drawXText');

                var xXText = x1Slope;
                var yXText = y1Slope;

                var yXTextCoords = coords.y(yXText);
                if (values.m > 0)
                    yXTextCoords += 10;
                else
                    yXTextCoords -= 25;

                xText.setAttribute('x', coords.x(xXText));
                xText.setAttribute('y', yXTextCoords);
            }
        });
    })();
</script>
